---
title: "Bevy 0.15 â†’ 0.16 ã®ç›®ç«‹ã£ãŸå¤‰æ›´ç‚¹"
emoji: "ğŸ¦â€â¬›"
type: "tech"
topics:
  - "bevy"
published: true
published_at: "2025-05-10 10:19"
---

## æ¦‚è¦

ã™ã¹ã¦ã®å¤‰æ›´ç®‡æ‰€ã¯å…¬å¼ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ã§ç¢ºèªãŒã§ãã‚‹ã®ã§ã€ã“ã®è¨˜äº‹ã§ã¯å®Ÿéš›ã®å¤‰æ›´å¯¾å¿œä½œæ¥­ã§ç‰¹ã«ç›®ç«‹ã£ãŸç‚¹ã®ã¿ã‚’æŠœç²‹ã™ã‚‹ã€‚
https://bevyengine.org/learn/migration-guides/0-15-to-0-16/

ãªãŠã€Bevy 0.14 â†’ 0.15 ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ãŒè©³ã—ãã€ã“ã®æ™‚å¤§ãã‹ã£ãŸã®ã¯Bundleã®å»ƒæ­¢ã€‚ã“ã‚Œã«ã•ãˆå¯¾å¿œã—ã¦ã„ã‚Œã°ã€0.16ç§»è¡Œæ™‚ã«ã“ã“ã¾ã§å¤§ããªå¤‰æ›´ã¯ï¼ˆæ—§æ¥APIã¨ã®äº’æ›æ€§çš„ã«ã¯ï¼‰å°‘ãªã„ã€‚
https://zenn.dev/hyoi/scraps/9e3b28d5b44e02

ï¼ˆåŒä½œè€…ãŒ0.16å¯¾å¿œã®ã‚¹ã‚¯ãƒ©ãƒƒãƒ—ã‚‚å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ä½µã›ã¦å‚ç…§ã—ã¦ã»ã—ã„ã€‚ï¼‰

https://zenn.dev/hyoi/scraps/63017d1958cf80

## single() ãŒ Result ã‚’è¿”ã™ã‚ˆã†ã«ã€‚

0.16ã§ã¯ã€`.single()` ã‚„ `.single_mut()` ã®è¿”ã‚Šå€¤ãŒ `Result` ã‚’è¿”ã™ã‚ˆã†ã«ãªã£ãŸã€‚ã“ã®ãŸã‚ã€ä»Šã¾ã§å˜ã« `.single()` ã¨æ›¸ã„ã¦ã„ãŸç®‡æ‰€ã¯ `.single().unwrap()` ãªã©ã®å¯¾å¿œãŒå¿…è¦ã«ãªã‚‹ã€‚

[https://bevyengine.org/learn/migration-guides/0-15-to-0-16/#unified-error-handling](https://bevyengine.org/learn/migration-guides/0-15-to-0-16/#unified-error-handling)

## è¦ªå­é–¢ä¿‚ã®ï¼ˆå†…éƒ¨çš„ãªï¼‰æ‰±ã„ã®å¤‰æ›´

[0.16ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](https://bevyengine.org/learn/migration-guides/0-15-to-0-16/)ã®å†’é ­ã«ã‚‚æ›¸ã‹ã‚Œã¦ã„ã¦ã€è©³ç´°ã«ã‚‚ä½•å›ã‚‚ç™»å ´ã™ã‚‹ã®ãŒã€è¦ªå­é–¢ä¿‚ã«ã¤ã„ã¦ã®æ‰±ã„ã®å¤‰æ›´ã€‚

ã“ã‚Œã«é–¢ã—ã¦ã¯ã¶ã£ã¡ã‚ƒã‘ã€ä»Šã¾ã§ä½¿ã£ã¦ã„ãŸAPIè‡ªä½“ã«ãã‚Œã»ã©å¤§ããå¤‰æ›´ã¯ãªãã¦ã€å†…éƒ¨çš„ãªé–¢ä¿‚æ€§ã®æ‰±ã„ã«å¤‰æ›´ãŒã‚ã£ãŸãŸã‚ã€ä»Šå¾Œæ–°ã—ãä½•ã‹ã‚’ä½œã‚‹éš›ã«ã€æŸ”è»ŸãªEntityé–“ã®é–¢ä¿‚æ€§ã®æ§‹ç¯‰ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

å…·ä½“çš„ã«ã¯ã€`ChildOf()` ãªã©ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒç™»å ´ã—ã€ä»Šã¾ã§ç‰¹åˆ¥ãªæ‰±ã„ã ã£ãŸè¦ªã«å¯¾ã™ã‚‹å­ã®ç™»éŒ²ãŒã€[ä»–ã®é–¢ä¿‚æ€§](https://docs.rs/bevy/latest/bevy/ecs/relationship/trait.Relationship.html)ã¨åŒç­‰ã«æ‰±ã‚ã‚Œã‚‹ã‚ˆã†ãªAPIã¨ãªã£ãŸã€‚ï¼ˆãŸã ã—æ—§æ¥ã®APIã¯æ¥µåŠ›äº’æ›æ€§ã‚’ä¿ã¤ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚ï¼‰

```rust
commands.spawn(ChildOf(some_parent));

commands.entity(some_entity).insert(ChildOf(new_parent));
```

ã¾ãŸã€æ–°ã—ã„æ§‹æ–‡ã¨ã—ã¦ `children![]` ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚ã‚‚ã¡ã‚ã‚“ä»Šã¾ã§ã®æ§‹æ–‡ã‚‚ä½¿ãˆã‚‹ã€‚

```rust
commands.spawn((
    Player,
    children![
        (RightHand, children![Glove, Sword]),
        (LeftHand, children![Glove, Shield]),
    ],
));
```


## Componentã®Mutability

[ImmutableãªComponent](https://bevyengine.org/learn/migration-guides/0-15-to-0-16/#add-immutable-component-support)ãŒæ–°ãŸã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

ã“ã‚Œã«ã‚ˆã£ã¦ã€å˜ã« `Component` ã¨æ›¸ã„ã¦ã„ãŸç®‡æ‰€ãŒã€`Component<Mutability = Mutable>` ã¨æ›¸ã‹ãªã‘ã‚Œã°ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‰ãªããªã‚‹ç®‡æ‰€ãŒå‡ºã¦ãã‚‹ã€‚

ã¡ãªã¿ã«Immutableï¼ˆä¸å¤‰ï¼‰ãªComponentã‚’ä½œã‚ŠãŸã„ã¨ãã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã‚ˆã†ã ã€‚

```rust
#[derive(Component)]
#[component(immutable)]
pub struct MyComponent(pub u32);
```