---
title: "Bevy勉強ノート2025"
closed: false
archived: false
created_at: "2025-05-12"
---

      "author": "funatsufumiya",
      "created_at": "2025-05-12",
      "body_updated_at": "2025-05-12"

Bevyの開発時のストレスを減らす方法。\n\nずっと疑問に思っていた、どうすればコンパイルするとき部分的にReleaseビルドっぽくしたりできるかがわかった。[bevy-procedural/modeling](https://github.com/bevy-procedural/modelling) のコードをいじっていて気付いた。\n\n```toml\n# Cargo.toml\n\n# Enable a small amount of optimization in debug mode\n[profile.fast-dev]\ninherits = \"dev\"\nopt-level = 1\n\n# Enable high optimizations for dependencies (incl. Bevy), but not for our code:\n[profile.fast-dev.package.\"*\"]\ninherits = \"dev\"\nopt-level = 3\n```\n\nこのコードでは、基本的には `-O1` の最適化を適用しながらも、Bevyなどの依存関係には `-O3` の最適化を適用することで、デバッグ時にも実行を速くし、バランスをとっている。\n\nさらに以下の動画にある、Bevyの動的リンク機能を有効にすると次のようになる。こうすればさらにリンクが速くなり、開発がさらに高速化される。（動画中にあるように、これをdefaultのfeaturesにしてしまうと、Releaseビルド時にも適用されて都合が悪いので、開発時のみこのfeaturesを使うと良いとのこと。）\n\nhttps://www.youtube.com/watch?v=5k66KB6DisI&t=258s\n\n```toml\n# Cargo.toml\n\n[features]\ndynamic_linking = [\"bevy/dynamic_linking\"]\n\n# Enable a small amount of optimization in debug mode\n[profile.fast-dev]\ninherits = \"dev\"\nopt-level = 1\n\n# Enable high optimizations for dependencies (incl. Bevy), but not for our code:\n[profile.fast-dev.package.\"*\"]\ninherits = \"dev\"\nopt-level = 3\n```\n\nさらに動画中にあるように、rust-lldやmoldなどのリンカを使うとさらに開発が快適になる。\n\nhttps://qiita.com/benki/items/decada107802657336d0\n\nsccacheを使うとさらに快適になるのだけれど、実はこの一連の流れは[BevyのSetupガイド (Getting Started)](https://bevyengine.org/learn/quick-start/getting-started/setup/)に書いてあるらしい。（なぜ知らなかった…。）\n\nhttps://qiita.com/toyboot4e/items/2acba3d8ea4821bf0736

